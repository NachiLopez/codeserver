  <h1 class="p-2 text-center text-info w-100">CARRITO DE COMPRAS</h1>
  <div class="container d-flex justify-content-center" id="cart" style="width: 100% !important;">

    {{#each cart}}
       <div class="card m-2 d-flex"  style="max-width: 500px;">
      <div class="fs-4 p-2"><span>Email: </span>{{this.user_id.email}}</div>
      <div class="card-body text-center">
        <h5 class="card-title h6 text-center">{{this.product_id.title}}</h5>
        <img src="{{this.product_id.photo}}" style="width: auto; height: 200px; margin: 10px 0px;" alt="...">
        <p class="card-text small">Precio: ${{this.product_id.price}}</p>
        <p class="card-text small">Cantidad: <input type="number" class="form-control form-control-sm quantity-input"
            value="{{this.quantity}}" min="1"></p>
            <div class="text-center">
      <button class="btn btn-sm btn-danger remove-btn" name="{{this._id}}">ELIMINAR</button>
    </div>
      </div>
    </div>
    {{/each}}
  </div>

  <div class="btn-container d-flex justify-content-center">
    <button id="checkout-btn" class="btn btn-primary mt-3 m-2">FINALIZAR COMPRA</button>
    <button id="cancel-btn" class="btn btn-danger mt-3 m-2">CANCELAR COMPRA</button>
  </div>

  <script>
    // Event listener para eliminar un producto
    document.querySelectorAll('.remove-btn').forEach(item => {
      item.addEventListener('click', async event => {
        await fetch("http://localhost:8080/api/cart/" + event.target.name, {
          method: "DELETE",
          headers: { "Content-Type": "application/json" }
        });
        event.target.closest('.card').remove();
      });
    });

    // Event listener para finalizar compra
    document.getElementById('checkout-btn').addEventListener('click', function () {
      document.getElementById('cart').innerHTML = '';
    });

    // Event listener para cancelar compra
    document.getElementById('cancel-btn').addEventListener('click', function () {
      document.getElementById('cart').innerHTML = '';
    });
  </script>
